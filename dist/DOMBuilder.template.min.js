/**
 * DOMBuilder 2.1.2 (modes: dom [default], html, template) - https://github.com/insin/DOMBuilder
 * MIT Licensed
 */
(function(){function w(c){return B[c]}var B={};w.define=function(c,i){var a={},f={};a.exports=f;i(a,f,w);if("[object Array]"==Object.prototype.toString.call(c))for(var f=0,g=c.length;f<g;f++)B[c[f]]=a.exports;else B[c]=a.exports};w.define(["isomorph/lib/is","./is"],function(c){var i=Object.prototype.toString;c.exports={Array:function(a){return"[object Array]"==i.call(a)},Boolean:function(a){return"[object Boolean]"==i.call(a)},Date:function(a){return"[object Date]"==i.call(a)},Empty:function(a){for(var f in a)return!1;
return!0},Error:function(a){return"[object Error]"==i.call(a)},Function:function(a){return"[object Function]"==i.call(a)},NaN:isNaN,Number:function(a){return"[object Number]"==i.call(a)},Object:function(a){return"[object Object]"==i.call(a)},RegExp:function(a){return"[object RegExp]"==i.call(a)},String:function(a){return"[object String]"==i.call(a)}}});w.define("isomorph/lib/object",function(c){var i=function(){var a=Object.prototype.hasOwnProperty;return function(f,g){return a.call(f,g)}}();c.exports=
{hasOwn:i,extend:function(a){for(var f=1,g=arguments.length,c;f<g;f++)if(c=arguments[f])for(var j in c)i(c,j)&&(a[j]=c[j]);return a},inherits:function(a,f){var g=function(){};g.prototype=f.prototype;a.prototype=new g;return a.prototype.constructor=a},items:function(a){var f=[],g;for(g in a)i(a,g)&&f.push([g,a[g]]);return f},fromItems:function(a){for(var f={},g=0,c=a.length,j;g<c;g++)j=a[g],f[j[0]]=j[1];return f},lookup:function(a){for(var f={},g=0,c=a.length;g<c;g++)f[""+a[g]]=!0;return f},get:function(a,
f,g){return i(a,f)?a[f]:g}}});w.define("isomorph/lib/array",function(c,i,a){var f=a("./is"),g=Array.prototype.splice;c.exports={flatten:function(a){for(var c=0,h=a.length,l;c<h;c++)l=a[c],f.Array(l)&&(h+=l.length-1,g.apply(a,[c,1].concat(l)),c--);return a}}});w.define(["./dombuilder/core","./core"],function(c,i,a){function f(b,e){return!!b&&"[object Object]"==x.call(b)&&(!e||!q.modes[e].isModeObject(b))}function g(b){return"[object Array]"==x.call(b)&&"undefined"==typeof b.isElement}function s(b){b.isElement=
!0;return b}function j(b){for(var e={},a=0,d;d=r[a];a++)e[d.toUpperCase()]=h(d,b);return e}function h(b,e){var a=function(){if(arguments.length){var d=t.call(arguments),a,n=d.length,l=d[0];if(1===n&&g(l))d=l;else if(f(l,"undefined"!=typeof e?e:q.mode))a=l,d=2==n&&g(d[1])?d[1]:d.slice(1);return q.createElement(b,a,d,e)}return(a="undefined"!=typeof e?e:q.mode)?q.modes[a].createElement(b,{},[]):s([b])};a.map=function(){var d=t.call(arguments);if(g(d[0]))var a={},n=d[0],d=k.Function(d[1])?d[1]:null;else a=
d[0],n=d[1],d=k.Function(d[2])?d[2]:null;return q.map(b,a,n,d,e)};return a}function l(b,e){return{index:b,first:0==b,last:b==e-1}}var k=a("isomorph/lib/is"),m=a("isomorph/lib/object"),y=a("isomorph/lib/array"),x=Object.prototype.toString,t=Array.prototype.slice,a=(i="undefined"!=typeof jQuery)?jQuery.attrFn:m.lookup("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" ")),
r="a abbr acronym address area article aside audio b bdi bdo big blockquote body br button canvas caption cite code col colgroup command datalist dd del details dfn div dl dt em embed fieldset figcaption figure footer form frame frameset h1 h2 h3 h4 h5 h6 hr head header hgroup html i iframe img input ins kbd keygen label legend li link map mark meta meter nav noscript object ol optgroup option output p param pre progress q rp rt ruby samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track tt ul var video wbr".split(" "),
v=i?function(b,e){jQuery(b).html(e)}:function(b,e){try{b.innerHTML=e}catch(a){var d=document.createElement("div");for(d.innerHTML=e;b.firstChild;)b.removeChild(b.firstChild);for(;d.firstChild;)b.appendChild(d.firstChild)}},q={version:"2.1.1",mode:null,modes:{},addMode:function(b){b=m.extend({isModeObject:function(){return!1},api:{},apply:{}},b);this.modes[b.name]=b;this[b.name]=m.extend(j(b.name),b.apply);null===this.mode&&(this.mode=b.name)},withMode:function(b,e){var a=this.mode;this.mode=b;try{return e.apply(null,
t.call(arguments,2))}finally{this.mode=a}},elements:j(),array:j(null),apply:function(b,e){e&&this.modes[e]?m.extend(b,this[e]):m.extend(b,this.elements);return b},build:function(b,e){for(var e=e||this.mode,a=b[0],d="#document-fragment"==a,l=!d&&f(b[1],e)?b[1]:null,c=b.length,g=[],q,m=null===l?1:2;m<c;m++)q=b[m],k.Array(q)?g.push(this.build(q,e)):g.push(q);return d?this.modes[e].fragment(g):this.modes[e].createElement(a,l,g)},createElement:function(b,e,a,d){e=e||{};a=a||[];if(d="undefined"!=typeof d?
d:this.mode)return y.flatten(a),this.modes[d].createElement(b,e,a);var b=[b],l;for(l in e){b.push(e);break}a.length&&(b=b.concat(a));return s(b)},textNode:function(a,e){e="undefined"!=typeof e?e:this.mode;return this.modes[e].textNode(a)},map:function(a,e,n,d,k){for(var f=[],c=0,y=n.length,j,h;c<y;c++){j=m.extend({},e);if(null!=d){if(h="undefined"!=typeof k?q.withMode(k,d,n[c],j,l(c,y)):d(n[c],j,l(c,y)),null===h)continue}else h=n[c];g(h)||(h=[h]);f.push(this.createElement(a,j,h,k))}return f},fragment:function(){var a=
function(){var e;e=1===arguments.length&&g(arguments[0])?arguments[0]:t.call(arguments);return this.mode?(y.flatten(e),this.modes[this.mode].fragment(e)):s(["#document-fragment"].concat(e))};a.map=function(e,a){if(!k.Function(a))return q.fragment(e);for(var d=[],b=0,c=e.length,f;b<c;b++)f=a(e[b],l(b,c)),null!==f&&(d=d.concat(f));return q.fragment(d)};return a}(),util:{EVENT_ATTRS:a,FRAGMENT_NAME:"#document-fragment",JQUERY_AVAILABLE:i,TAG_NAMES:r,setInnerHTML:v}};c.exports=q});w.define("Concur",function(c,
i,a){function f(a){var k=a.__mixin__;s.Array(k)||(k=[k]);for(var c={},f=0,g=k.length;f<g;f++){var h=c,i=k[f];s.Function(i)?j.extend(h,i.prototype):j.extend(h,i)}delete a.__mixin__;return j.extend(c,a)}function g(a,k,c){var f;f=k&&j.hasOwn(k,"constructor")?k.constructor:function(){a.apply(this,arguments)};a!==h&&(j.inherits(f,a),f.__super__=a.prototype);k&&j.extend(f.prototype,k);c&&j.extend(f,c);return f}var s=a("isomorph/lib/is"),j=a("isomorph/lib/object"),h=c.exports=function(){};h.extend=function(a,
c){"undefined"!=typeof this.prototype.__meta__&&(a=a||{},c=c||{},this.prototype.__meta__(a,c));a&&j.hasOwn(a,"__mixin__")&&(a=f(a));c&&j.hasOwn(c,"__mixin__")&&(c=f(c));var h=g(this,a,c);h.extend=this.extend;return h}});w.define("./dombuilder/dom",function(c,i,a){var c=a("./core"),f=a("isomorph/lib/object"),g=window.document,s=c.util.EVENT_ATTRS,j=c.util.setInnerHTML,h=c.util.JQUERY_AVAILABLE?function(a,c){if(f.hasOwn(c,"innerHTML")){var g=c.innerHTML;delete c.innerHTML;return jQuery("<"+a+">",c).html(g).get(0)}return jQuery("<"+
a+">",c).get(0)}:function(){var a={tabindex:"tabIndex"},c={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},h=function(){var a=g.createElement("div");a.setAttribute("className","t");a.innerHTML='<span style="color:silver">s<span>';var b=a.getElementsByTagName("span")[0],e=g.createElement("input");
e.value="t";e.setAttribute("type","radio");return{style:/silver/.test(b.getAttribute("style")),getSetAttribute:"t"!=a.className,radioValue:"t"==e.value}}(),i,x=function(a,b,e){!1!==b&&(b=c[e]||e,b in a&&(a[b]=!0),a.setAttribute(e,e.toLowerCase()));return e},t={type:function(a,b){if(!h.radioValue&&"radio"==b&&a.nodeName&&"INPUT"==a.nodeName.toUpperCase()){var e=a.value;a.setAttribute("type",b);e&&(a.value=e);return b}},value:function(a,b,e){if(i&&a.nodeName&&"BUTTON"==a.nodeName.toUpperCase())return i(a,
b,e);a.value=b}},r=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=/\:|^on/;h.getSetAttribute||(a=c,i=t.name=t.title=function(a,b,e){if(a=a.getAttributeNode(e))return a.nodeValue=b},t.width=t.height=function(a,b){if(""===b)return a.setAttribute(name,"auto"),b});h.style||(t.style=function(a,b){return a.style.cssText=""+b});return function(h,b){var e=g.createElement(h),n,d;if(f.hasOwn(b,"innerHTML")){j(e,b.innerHTML);delete b.innerHTML}for(n in b){d=
b[n];if(s[n])e["on"+n]=d;else{var m=e,u=n;if("getAttribute"in m){var z=void 0,u=a[u]||u,z=t[u];if(!z)if(r.test(u))z=x;else if(i&&u!="className"&&(m.nodeName&&m.nodeName.toUpperCase()=="FORM"||v.test(u)))z=i;d!==void 0&&!(z&&z(m,d,u)!==void 0)&&m.setAttribute(u,""+d)}else{u=c[u]||u;d!==void 0&&(m[u]=d)}}}return e}}();c.addMode({name:"dom",createElement:function(a,c,i){var j=f.hasOwn(c,"innerHTML"),a=h(a,c);if(!j)for(var j=0,c=i.length,x;j<c;j++)(x=i[j])&&x.nodeType?a.appendChild(x):a.appendChild(g.createTextNode(""+
x));return a},textNode:function(a){return g.createTextNode(a)},fragment:function(a){for(var c=g.createDocumentFragment(),f=0,h=a.length,j;f<h;f++)j=a[f],j.nodeType?c.appendChild(j):c.appendChild(g.createTextNode(""+j));return c},isModeObject:function(a){return!!a.nodeType},api:{createElement:h}})});w.define("./dombuilder/html",function(c,i,a){function f(a){this.value=a}function g(a){return new f(a)}function s(a){return a instanceof f}function j(a){return a instanceof f?a.value:b(""+a)}function h(a){this.childNodes=
a||[];this._inlineFragments();this.firstChild=this.childNodes.length?this.childNodes[0]:null}function l(a,b,d){h.call(this,d);this.tagName=this.nodeName=a.toLowerCase();this.attributes=b||{}}function k(a){h.call(this,a)}var c=a("./core"),m=a("isomorph/lib/object"),y=Array.prototype.splice,x=c.util.EVENT_ATTRS,a=c.util.FRAGMENT_NAME,i=c.util.JQUERY_AVAILABLE,t=c.util.setInnerHTML,r=m.lookup(c.util.TAG_NAMES),v=m.lookup("area base br col command embed frame hr input img keygen link meta param source track wbr".split(" ")),
q=i?function(a,b,d){jQuery("#"+a)[b](d)}:function(a,b,d){document.getElementById(a)["on"+b]=d};m.inherits(f,String);f.prototype.toString=f.prototype.valueOf=function(){return this.value};var b=function(){var a=/&/g,b=/</g,d=/>/g,c=/"/g,f=/'/g;return function(g){return g.replace(a,"&amp;").replace(b,"&lt;").replace(d,"&gt;").replace(c,"&quot;").replace(f,"&#39;")}}();m.inherits(h,Object);h.prototype._inlineFragments=function(){for(var a=0,b=this.childNodes.length,d;a<b;a++)d=this.childNodes[a],d instanceof
k&&(y.apply(this.childNodes,[a,1].concat(d.childNodes)),d._clear())};h.prototype.appendChild=function(a){a instanceof k?(this.childNodes=this.childNodes.concat(a.childNodes),a._clear()):this.childNodes.push(a);null===this.firstChild&&(this.firstChild=this.childNodes[0])};h.prototype.cloneNode=function(a){var b=this._clone();if(!0===a)for(var d=0,c=this.childNodes.length,f;d<c;d++)f=this.childNodes[d],f instanceof l&&(f=f.cloneNode(a)),0===d&&(b.firstChild=f),b.childNodes.push(f);return b};h.prototype.hasChildNodes=
function(){return!!this.childNodes.length};h.prototype.removeChild=function(a){if(null!==this.firstChild&&a===this.firstChild)return this.firstChild=1<this.childNodes.length?this.childNodes[1]:null,this.childNodes.shift();for(var b=1,c=this.childNodes.length;b<c;b++)if(a===this.childNodes[b])return this.childNodes.splice(b,1)[0];throw Error("Node was not found");};h.prototype._clone=function(){return new Node};m.inherits(l,h);l.eventTrackerId=1;l.prototype.nodeType=1;l.prototype._clone=function(){return new l(this.tagName,
m.extend({},this.attributes))};l.prototype.toString=function(a){var a="undefined"!=typeof a?a:!1,c=r[this.tagName]?this.tagName:j(this.tagName),d=["<"+c],g;for(g in this.attributes)"innerHTML"!==g&&(x[g]?!0===a&&!this.eventsFound&&(this.eventsFound=!0):d.push(" "+j(g.toLowerCase())+'="'+j(this.attributes[g])+'"'));this.eventsFound&&!m.hasOwn(this.attributes,"id")&&(this.id="__DB"+l.eventTrackerId++ +"__",d.push(' id="'+this.id+'"'));d.push(">");if(v[c])return d.join("");if(m.hasOwn(this.attributes,
"innerHTML"))d.push(this.attributes.innerHTML);else{g=0;for(var h=this.childNodes.length,i;g<h;g++)i=this.childNodes[g],i instanceof l||i instanceof f?d.push(i.toString(a)):d.push(b(""+i))}d.push("</"+c+">");return d.join("")};l.prototype.addEvents=function(){if(this.eventsFound){var a=m.hasOwn(this.attributes,"id")?j(this.attributes.id):this.id,b;for(b in this.attributes)x[b]&&q(a,b,this.attributes[b]);delete this.eventsFound;delete this.id}a=0;b=this.childNodes.length;for(var c;a<b;a++)c=this.childNodes[a],
c instanceof l&&c.addEvents()};l.prototype.insertWithEvents=function(a){t(a,this.toString(!0));this.addEvents()};m.inherits(k,h);k.prototype._clear=function(){this.childNodes=[];this.firstChild=null};k.prototype._clone=function(){return new k};k.prototype.nodeType=11;k.prototype.nodeName=a;k.prototype.toString=function(a){for(var a="undefined"!=typeof a?a:!1,c=[],d=0,g=this.childNodes.length,h;d<g;d++)h=this.childNodes[d],h instanceof l||h instanceof f?c.push(h.toString(a)):c.push(b(""+h));return c.join("")};
k.prototype.addEvents=function(){for(var a=0,b=this.childNodes.length,c;a<b;a++)c=this.childNodes[a],c instanceof l&&c.addEvents()};k.prototype.insertWithEvents=function(a){t(a,this.toString(!0));this.addEvents()};c.addMode({name:"html",createElement:function(a,b,c){return new l(a,b,c)},textNode:function(a){return a},fragment:function(a){return new k(a)},isModeObject:function(a){return a instanceof h||a instanceof f},api:{escapeHTML:b,conditionalEscape:j,isSafe:s,markSafe:g,SafeString:f,HTMLNode:h,
MockElement:l,MockFragment:k},apply:{isSafe:s,markSafe:g}})});w.define("./dombuilder/template",function(c,i,a){function f(a,b){for(var c=[],d=0,e=a.length,g;d<e;d++)g=a[d],g instanceof b&&c.push(g),g instanceof o&&"undefined"!=typeof g.contents&&c.push.apply(c,f(g.contents,b));return c}function g(a){return a.replace("\\","\\\\").replace('"','\\"')}function s(a,b){for(var c=[],d=0,f=a.length,e;d<f;d++)(e=a[d])&&(e instanceof o||A.Function(e.render))?c.push(e.render(b)):c.push(e);return c}function j(){this.message=
"pop() was called more times than push()"}function h(a){this.message=a}function l(a){this.message=a}function k(a){this.message=a}function m(a,b){return(A.Array(a)?x(a):y(a)).render(b)}function y(a){if("undefined"==typeof J[a])throw new k(a);return J[a]}function x(a){for(var b=[],c=0,d=a.length;c<d;c++)try{return y(a[c])}catch(e){b.push(a[c])}throw new k(b.join(", "));}function t(a){this.variable=new r(a)}function r(a,b){this.expr=a;this.callFunctions="undefined"!=typeof b?b:!0}function v(a){if(!(this instanceof
v))return new v(a);this.stack=[a||{}];this.renderContext=new q}function q(a){this.stack=[a||{}]}function b(){this.blocks={}}function e(a,b){A.String(a)?this.name=a:(this.name=a.name,this.parent=a.extend||null);this.contents=b;for(var c=f(b,n),d={},e,g=0;e=c[g];g++){if("undefined"!=typeof d[e.name])throw new l("Block with name '"+e.name+"' appears more than once.");d[e.name]=e}this.blocks=d;o.prototype.parseContents.call(this);J[this.name]=this}function n(a,b){this.name=A.String(a)?a:a.name;o.call(this,
b)}function d(a,b,c){this.template=a;this.extraContext=b||{};this.only=c||!1}function w(a,b,c){this.tagName=a;this.attributes=p.extend({},b);this.dynamicAttrs=!1;for(var d in this.attributes)if(a=this.attributes[d],A.String(a)&&K.test(a))this.attributes[d]=new C(a),this.dynamicAttrs||(this.dynamicAttrs=!0);else if((a instanceof o||a instanceof r)&&!this.dynamicAttrs)this.dynamicAttrs=!0;o.call(this,c)}function u(a,b){this._parseExpr(a);this.emptyContents=b.length&&b[b.length-1]instanceof z?b.pop().contents:
[];o.call(this,b)}function z(a){o.call(this,a)}function G(a,b){this.test=A.Function(a)?a:this._parseExpr(a);this.elseContents=b.length&&b[b.length-1]instanceof H?b.pop().contents:[];o.call(this,b)}function H(a){o.call(this,a)}function C(a){(this.dynamic=K.test(a))?this.func=this._parseExpr(a):this.text=a}function E(a,b){this.values=a;b=p.extend({as:null,silent:!1},b||{});this.variableName=b.as;this.silent=b.silent;this.id="cycle"+E.cycleId++}function B(a){this.version=a||5}var I=a("./core"),c=a("Concur"),
A=a("isomorph/lib/is"),p=a("isomorph/lib/object"),D=a("isomorph/lib/array"),F=Array.prototype.slice,O=/( in )([\w_]+)$/,P=/, ?/,K=/{{(.*?)}}/,M=/^\s+|\s+$/g,N={4:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">',5:"<!DOCTYPE html>"},J={},L=function(){var a={};return function(b,c){c.global||(p.hasOwn(a,c.source)||(a[c.source]=RegExp(c.source,"g")),c=a[c.source]);for(var d=[],e,f,g=0;e=c.exec(b);)f=e.index+e[0].length,f>g&&(d.push(b.slice(g,e.index)),1<e.length&&
e.index<b.length&&d.push.apply(d,e.slice(1)),g=f),c.lastIndex===e.index&&c.lastIndex++;d.push(b.slice(g));return d}}();p.inherits(j,Error);p.inherits(h,Error);p.inherits(l,Error);p.inherits(k,Error);t.prototype.resolve=t.prototype.render=function(a,b){var c;if(this.variable instanceof r)try{c=this.variable.resolve(a)}catch(d){if(!(d instanceof h))throw d;if(b)c=null;else throw d;}else c=this.variable;return c};r.prototype.resolve=r.prototype.render=function(a){var b=this.expr.split("."),c=b.shift(),
d=a.get(c);if(a.hasKey(c))A.Function(d)&&this.callFunctions&&(d=d());else throw new h("Could not find ["+c+"] in "+a);if(b.length)for(var a=b.length,e=0;e<a;e++){c=b[e];if(null==d||"undefined"==typeof d[c])throw new h("Could not find ["+c+"] in "+d);c=d[c];d=A.Function(c)&&this.callFunctions?c.call(d):c}return d};v.prototype.push=function(a){this.stack.push(a||{})};v.prototype.pop=function(){if(1==this.stack.length)throw new j;return this.stack.pop()};v.prototype.set=function(a,b){this.stack[this.stack.length-
1][a]=b};v.prototype.zip=function(a,b){for(var c=this.stack[this.stack.length-1],d=Math.min(a.length,b.length),e=0;e<d;e++)c[a[e]]=b[e]};v.prototype.get=function(a,b){for(var c=this.stack.length-1;0<=c;c--)if(p.hasOwn(this.stack[c],a))return this.stack[c][a];return void 0!==b?b:null};v.prototype.hasKey=function(a){for(var b=0,c=this.stack.length;b<c;b++)if(p.hasOwn(this.stack[b],a))return!0;return!1};p.inherits(q,v);q.prototype.get=function(a,b){var c=this.stack[this.stack.length-1];return p.hasOwn(c,
a)?c[a]:void 0!==b?b:null};q.prototype.hasKey=function(a){return p.hasOwn(this.stack[this.stack.length-1],a)};b.prototype.addBlocks=function(a){for(var b in a)"undefined"!=typeof this.blocks[b]?this.blocks[b].unshift(a[b]):this.blocks[b]=[a[b]]};b.prototype.push=function(a,b){this.blocks[a].push(b)};b.prototype.pop=function(a){return"undefined"!=typeof this.blocks[a]&&this.blocks[a].length?this.blocks[a].pop():null};b.prototype.getBlock=function(a){return"undefined"!=typeof this.blocks[a]&&(a=this.blocks[a],
a.length)?a[a.length-1]:null};e.prototype.render=function(a){a instanceof v||(a=v(a));a.renderContext.push();try{return this._render(a)}finally{a.renderContext.pop()}};e.prototype._render=function(a){a.renderContext.hasKey("blockContext")||a.renderContext.set("blockContext",new b);a.renderContext.get("blockContext").addBlocks(this.blocks);return this.parent?y(this.parent)._render(a):I.fragment(s(this.contents,a))};var o=c.extend({constructor:function(a){this.contents=a||[];this.contents.length&&this.parseContents()}});
o.prototype.parseContents=function(){for(var a=0,b=this.contents.length,c;a<b;a++)c=this.contents[a],A.String(c)&&K.test(c)&&(this.contents[a]=new C(c))};p.inherits(n,o);n.prototype.render=function(a){var b=a.renderContext.get("blockContext"),c,d;a.push();null===b?(a.set("block",this),c=s(this.contents,a)):(d=c=b.pop(this.name),null===c&&(c=this),c=new n(c.name,c.contents),c.context=a,a.set("block",c),c=s(c.contents,a),null!==d&&b.push(this.name,d));a.pop();return c};n.prototype["super"]=function(){var a=
this.context.renderContext;return a.hasKey("blockContext")&&null!==a.get("blockContext").getBlock(this.name)?this.render(this.context):""};p.inherits(d,o);d.prototype.render=function(a){var b=this.template instanceof r?this.template.resolve(a):this.template,b=A.Array(b)?x(b):y(b),c={},d,e;for(d in this.extraContext)e=this.extraContext[d],c[d]=e instanceof r?e.resolve(a):e;if(this.only)return b.render(c);a.push(c);d=b.render(a);a.pop();return d};p.inherits(w,o);w.prototype.render=function(a){return I.createElement(this.tagName,
this.dynamicAttrs?this.renderAttributes(a):this.attributes,s(this.contents,a))};w.prototype.renderAttributes=function(a){var b={},c,d;for(c in this.attributes)d=this.attributes[c],d instanceof o?(d=d.render(a),A.Array(d)&&(d=D.flatten(d).join("")),b[c]=d):b[c]=d instanceof r?d.resolve(a):d;return b};p.inherits(u,o);u.prototype._parseExpr=function(a){var b=L(a,O);if(4!=b.length||" in "!=b[1]||""!==b[3])throw new l("Invalid ForNode expression: "+a);this.loopVars=b[0].split(P);this.listVar=new r(b[2])};
u.prototype.render=function(a){var b=this.listVar.resolve(a),c=[],d={parentloop:a.get("forloop",{})},e=b.length,f;if(1>b.length)return s(this.emptyContents,a);a.push();a.set("forloop",d);for(var g=0;g<e;g++)f=b[g],1===this.loopVars.length?a.set(this.loopVars[0],f):a.zip(this.loopVars,f),d.counter=g+1,d.counter0=g,d.revcounter=e-g,d.revcounter0=e-g-1,d.first=0===g,d.last=g===e-1,c.push.apply(c,s(this.contents,a));a.pop();return c};p.inherits(z,o);z.prototype.render=function(){return[]};p.inherits(G,
o);G.prototype._parseExpr=function(){var a=p.lookup("( ) && || == === <= < >= > != !== !! !".split(" ")),b=/(\(|\)|&&|\|\||={2,3}|<=|<|>=|>|!={1,2}|!{1,2})/,c=/^-?(?:\d+(?:\.\d+)?|(?:\d+)?\.\d+)$/,d=p.lookup(['"',"'"]),e=function(a){var b=a.charAt(0);return 1<a.length&&"undefined"!=typeof d[b]&&a.lastIndexOf(b)==a.length-1};return function(d){for(var f=["return ("],h=L(d,b),i=0,j=h.length,k;i<j;i++)k=h[i],"undefined"!=typeof a[k]?f.push(k):(k=k.replace(M,""))&&(c.test(k)||e(k)?f.push(k):f.push('new FilterExpression("'+
g(k)+'").resolve(c, true)'));f.push(");");try{var m=new Function("c","FilterExpression",f.join(" "));return function(a){return m(a,t)}}catch(n){throw new l("Invalid $if expression ("+n.message+"): "+d);}}}();G.prototype.render=function(a){return s(this.test(a)?this.contents:this.elseContents,a)};p.inherits(H,o);H.prototype.render=function(){return[]};p.inherits(C,o);C.prototype._parseExpr=function(a){for(var b=["var a = []"],a=L(a,K),c=0,d=a.length,e;c<d;c++)e=a[c],c%2?b.push('a.push(new Variable("'+
g(e.replace(M,""))+'").resolve(c))'):e&&b.push('a.push("'+g(e)+'")');b.push("return a");var f=new Function("c","Variable",b.join(";"));return function(a){return f(a,r)}};C.prototype.render=function(a){return this.dynamic?this.func(a):[this.text]};p.inherits(E,o);E.cycleId=1;E.prototype.render=function(a){var b=a.renderContext.get(this.id,0),c=this.values[b];a.renderContext.set(this.id,(b+1)%this.values.length);c instanceof r&&(c=c.resolve(a));this.variableName&&a.set(this.variableName,c);return this.silent?
[]:c};p.inherits(B,o);B.prototype.render=function(){var a=N[this.version]||"";return I.html?I.html.markSafe(a):a};I.addMode({name:"template",createElement:function(a,b,c){return new w(a,b,c)},textNode:function(a){return a},fragment:function(a){return a},isModeObject:function(a){return a instanceof o||a instanceof r},api:{DOCTYPES:N,templates:J,ContextPopError:j,VariableNotFoundError:h,TemplateSyntaxError:l,TemplateNotFoundError:k,renderTemplate:m,getTemplate:y,selectTemplate:x,FilterExpression:t,
Variable:r,Context:v,RenderContext:q,BlockContext:b,Template:e,TemplateNode:o,BlockNode:n,IncludeNode:d,ElementNode:w,ForNode:u,EmptyNode:z,IfNode:G,ElseNode:H,TextNode:C,CycleNode:E},apply:{Context:v,renderTemplate:m,$template:function(a){return new e(a,D.flatten(F.call(arguments,1)))},$doctype:function(a){return new B(a)},$block:function(a){return new n(a,D.flatten(F.call(arguments,1)))},$include:function(a,b,c){return new d(a,b,c)},$var:function(a){return new r(a)},$func:function(a){return new r(a,
!1)},$text:function(a){return new C(a)},$for:function(a){return new u(a,D.flatten(F.call(arguments,1)))},$empty:function(){return new z(D.flatten(F.call(arguments)))},$if:function(a){return new G(a,D.flatten(F.call(arguments,1)))},$else:function(){return new H(D.flatten(F.call(arguments)))},$cycle:function(a,b){return new E(a,b)}}})});w.define("DOMBuilder",function(c,i,a){i=a("./dombuilder/core");a("./dombuilder/dom");a("./dombuilder/html");a("./dombuilder/template");c.exports=i});window.DOMBuilder=
B.DOMBuilder})();