/**
 * DOMBuilder 2.1.0 (modes: dom [default], html, template) - https://github.com/insin/DOMBuilder
 * MIT Licensed
 */
(function(){function v(d){return A[d]}var A={};v.define=function(d,h){var a={},g={};a.exports=g;h(a,g,v);if("[object Array]"==Object.prototype.toString.call(d))for(var g=0,j=d.length;g<j;g++)A[d[g]]=a.exports;else A[d]=a.exports};v.define(["isomorph/lib/is","./is"],function(d){var h=Object.prototype.toString;d.exports={Array:function(a){return"[object Array]"==h.call(a)},Boolean:function(a){return"[object Boolean]"==h.call(a)},Date:function(a){return"[object Date]"==h.call(a)},Empty:function(a){for(var g in a)return!1;
return!0},Error:function(a){return"[object Error]"==h.call(a)},Function:function(a){return"[object Function]"==h.call(a)},NaN:isNaN,Number:function(a){return"[object Number]"==h.call(a)},Object:function(a){return"[object Object]"==h.call(a)},RegExp:function(a){return"[object RegExp]"==h.call(a)},String:function(a){return"[object String]"==h.call(a)}}});v.define("isomorph/lib/object",function(d){var h=Function.prototype.call.bind(Object.prototype.hasOwnProperty);d.exports={hasOwn:h,extend:function(a){for(var g=
1,j=arguments.length,d;g<j;g++)if(d=arguments[g])for(var l in d)h(d,l)&&(a[l]=d[l]);return a},inherits:function(a,g){var j=function(){};j.prototype=g.prototype;a.prototype=new j;return a.prototype.constructor=a},items:function(a){var g=[],j;for(j in a)h(a,j)&&g.push([j,a[j]]);return g},fromItems:function(a){for(var g={},j=0,d=a.length,l;j<d;j++)l=a[j],g[l[0]]=l[1];return g},lookup:function(a){for(var g={},j=0,d=a.length;j<d;j++)g[""+a[j]]=!0;return g}}});v.define("isomorph/lib/array",function(d,h,
a){var g=a("./is"),j=Array.prototype.splice;d.exports={flatten:function(a){for(var d=0,h=a.length,m;d<h;d++)m=a[d],g.Array(m)&&(h+=m.length-1,j.apply(a,[d,1].concat(m)),d--);return a}}});v.define(["./dombuilder/core","./core"],function(d,h,a){function g(b,c){return!!b&&"[object Object]"==x.call(b)&&(!c||!q.modes[c].isModeObject(b))}function j(b){return"[object Array]"==x.call(b)&&"undefined"==typeof b.isElement}function w(b){b.isElement=!0;return b}function l(b){for(var c={},f=0,e;e=r[f];f++)c[e.toUpperCase()]=
k(e,b);return c}function k(b,c){var f=function(){if(arguments.length){var e=s.call(arguments),f,a=e.length,m=e[0];if(1===a&&j(m))e=m;else if(g(m,"undefined"!=typeof c?c:q.mode))f=m,e=2==a&&j(e[1])?e[1]:e.slice(1);return q.createElement(b,f,e,c)}return(f="undefined"!=typeof c?c:q.mode)?q.modes[f].createElement(b,{},[]):w([b])};f.map=function(){var e=s.call(arguments);if(j(e[0]))var f={},a=e[0],e=n.Function(e[1])?e[1]:null;else f=e[0],a=e[1],e=n.Function(e[2])?e[2]:null;return q.map(b,f,a,e,c)};return f}
function m(b,c){return{index:b,first:0==b,last:b==c-1}}var n=a("isomorph/lib/is"),o=a("isomorph/lib/object"),N=a("isomorph/lib/array"),x=Object.prototype.toString,s=Array.prototype.slice,a=(h="undefined"!=typeof jQuery)?jQuery.attrFn:o.lookup("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" ")),r="a abbr acronym address area article aside audio b bdi bdo big blockquote body br button canvas caption cite code col colgroup command datalist dd del details dfn div dl dt em embed fieldset figcaption figure footer form frame frameset h1 h2 h3 h4 h5 h6 hr head header hgroup html i iframe img input ins kbd keygen label legend li link map mark meta meter nav noscript object ol optgroup option output p param pre progress q rp rt ruby samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track tt ul var video wbr".split(" "),
u=h?function(b,c){jQuery(b).html(c)}:function(b,c){try{b.innerHTML=c}catch(f){var e=document.createElement("div");for(e.innerHTML=c;b.firstChild;)b.removeChild(b.firstChild);for(;e.firstChild;)b.appendChild(e.firstChild)}},q={version:"2.1.0",mode:null,modes:{},addMode:function(b){b=o.extend({isModeObject:function(){return!1},api:{},apply:{}},b);this.modes[b.name]=b;this[b.name]=o.extend(l(b.name),b.apply);if(null===this.mode)this.mode=b.name},withMode:function(b,c){var f=this.mode;this.mode=b;try{return c.apply(null,
s.call(arguments,2))}finally{this.mode=f}},elements:l(),array:l(null),apply:function(b,c){c&&this.modes[c]?o.extend(b,this[c]):o.extend(b,this.elements);return b},build:function(b,c){for(var c=c||this.mode,f=b[0],e="#document-fragment"==f,a=!e&&g(b[1],c)?b[1]:null,m=b.length,q=[],d,j=null===a?1:2;j<m;j++)d=b[j],n.Array(d)?q.push(this.build(d,c)):q.push(d);return e?this.modes[c].fragment(q):this.modes[c].createElement(f,a,q)},createElement:function(b,c,f,e){c=c||{};f=f||[];if(e="undefined"!=typeof e?
e:this.mode)return N.flatten(f),this.modes[e].createElement(b,c,f);var b=[b],a;for(a in c){b.push(c);break}f.length&&(b=b.concat(f));return w(b)},textNode:function(b,c){c="undefined"!=typeof c?c:this.mode;return this.modes[c].textNode(b)},map:function(b,c,f,e,a){for(var d=[],g=0,n=f.length,h,k;g<n;g++){h=o.extend({},c);if(null!=e){if(k="undefined"!=typeof a?q.withMode(a,e,f[g],h,m(g,n)):e(f[g],h,m(g,n)),null===k)continue}else k=f[g];j(k)||(k=[k]);d.push(this.createElement(b,h,k,a))}return d},fragment:function(){var b=
function(){var c;c=1===arguments.length&&j(arguments[0])?arguments[0]:s.call(arguments);return this.mode?(N.flatten(c),this.modes[this.mode].fragment(c)):w(["#document-fragment"].concat(c))};b.map=function(c,b){if(!n.Function(b))return q.fragment(c);for(var e=[],a=0,d=c.length,g;a<d;a++)g=b(c[a],m(a,d)),null!==g&&(e=e.concat(g));return q.fragment(e)};return b}(),util:{EVENT_ATTRS:a,FRAGMENT_NAME:"#document-fragment",JQUERY_AVAILABLE:h,TAG_NAMES:r,setInnerHTML:u}};d.exports=q});v.define("./dombuilder/dom",
function(d,h,a){var d=a("./core"),g=a("isomorph/lib/object"),j=window.document,w=d.util.EVENT_ATTRS,l=d.util.setInnerHTML,k=d.util.JQUERY_AVAILABLE?function(a,d){if(g.hasOwn(d,"innerHTML")){var j=d.innerHTML;delete d.innerHTML;return jQuery("<"+a+">",d).html(j).get(0)}return jQuery("<"+a+">",d).get(0)}:function(){var a={tabindex:"tabIndex"},d={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",
colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},h=function(){var a=j.createElement("div");a.setAttribute("className","t");a.innerHTML='<span style="color:silver">s<span>';var b=a.getElementsByTagName("span")[0],c=j.createElement("input");c.value="t";c.setAttribute("type","radio");return{style:/silver/.test(b.getAttribute("style")),getSetAttribute:"t"!=a.className,radioValue:"t"==c.value}}(),k,x=function(a,b,c){!1!==b&&(b=d[c]||c,b in a&&(a[b]=!0),a.setAttribute(c,
c.toLowerCase()));return c},s={type:function(a,b){if(!h.radioValue&&"radio"==b&&a.nodeName&&"INPUT"==a.nodeName.toUpperCase()){var c=a.value;a.setAttribute("type",b);if(c)a.value=c;return b}},value:function(a,b,c){if(k&&a.nodeName&&"BUTTON"==a.nodeName.toUpperCase())return k(a,b,c);a.value=b}},r=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,u=/\:|^on/;if(!h.getSetAttribute)a=d,k=s.name=s.title=function(a,b,c){if(a=a.getAttributeNode(c))return a.nodeValue=
b},s.width=s.height=function(a,b){if(""===b)return a.setAttribute(name,"auto"),b};if(!h.style)s.style=function(a,b){return a.style.cssText=""+b};return function(h,b){var c=j.createElement(h),f,e;g.hasOwn(b,"innerHTML")&&(l(c,b.innerHTML),delete b.innerHTML);for(f in b)if(e=b[f],w[f])c["on"+f]=e;else{var o=c,t=f;if("getAttribute"in o){var y=void 0,t=a[t]||t,y=s[t];if(!y)if(r.test(t))y=x;else if(k&&"className"!=t&&(o.nodeName&&"FORM"==o.nodeName.toUpperCase()||u.test(t)))y=k;void 0!==e&&!(y&&void 0!==
y(o,e,t))&&o.setAttribute(t,""+e)}else t=d[t]||t,void 0!==e&&(o[t]=e)}return c}}();d.addMode({name:"dom",createElement:function(a,d,h){var l=g.hasOwn(d,"innerHTML"),a=k(a,d);if(!l)for(var l=0,d=h.length,x;l<d;l++)(x=h[l])&&x.nodeType?a.appendChild(x):a.appendChild(j.createTextNode(""+x));return a},textNode:function(a){return j.createTextNode(a)},fragment:function(a){for(var d=j.createDocumentFragment(),g=0,h=a.length,k;g<h;g++)k=a[g],k.nodeType?d.appendChild(k):d.appendChild(j.createTextNode(""+k));
return d},isModeObject:function(a){return!!a.nodeType},api:{createElement:k}})});v.define("./dombuilder/html",function(d,h,a){function g(c){this.value=c}function j(c){return new g(c)}function w(c){return c instanceof g}function l(c){return c instanceof g?c.value:b(""+c)}function k(c){this.childNodes=c||[];this._inlineFragments();this.firstChild=this.childNodes.length?this.childNodes[0]:null}function m(c,a,b){k.call(this,b);this.tagName=this.nodeName=c.toLowerCase();this.attributes=a||{}}function n(c){k.call(this,
c)}var d=a("./core"),o=a("isomorph/lib/object"),v=Array.prototype.splice,x=d.util.EVENT_ATTRS,a=d.util.FRAGMENT_NAME,h=d.util.JQUERY_AVAILABLE,s=d.util.setInnerHTML,r=o.lookup(d.util.TAG_NAMES),u=o.lookup("area base br col command embed frame hr input img keygen link meta param source track wbr".split(" ")),q=h?function(c,a,b){jQuery("#"+c)[a](b)}:function(c,a,b){document.getElementById(c)["on"+a]=b};o.inherits(g,String);g.prototype.toString=g.prototype.valueOf=function(){return this.value};var b=
function(){var c=/&/g,a=/</g,b=/>/g,d=/"/g,g=/'/g;return function(h){return h.replace(c,"&amp;").replace(a,"&lt;").replace(b,"&gt;").replace(d,"&quot;").replace(g,"&#39;")}}();o.inherits(k,Object);k.prototype._inlineFragments=function(){for(var c=0,a=this.childNodes.length,b;c<a;c++)b=this.childNodes[c],b instanceof n&&(v.apply(this.childNodes,[c,1].concat(b.childNodes)),b._clear())};k.prototype.appendChild=function(c){c instanceof n?(this.childNodes=this.childNodes.concat(c.childNodes),c._clear()):
this.childNodes.push(c);if(null===this.firstChild)this.firstChild=this.childNodes[0]};k.prototype.cloneNode=function(c){var a=this._clone();if(!0===c)for(var b=0,d=this.childNodes.length,g;b<d;b++){g=this.childNodes[b];g instanceof m&&(g=g.cloneNode(c));if(0===b)a.firstChild=g;a.childNodes.push(g)}return a};k.prototype.hasChildNodes=function(){return!!this.childNodes.length};k.prototype.removeChild=function(a){if(null!==this.firstChild&&a===this.firstChild)return this.firstChild=1<this.childNodes.length?
this.childNodes[1]:null,this.childNodes.shift();for(var b=1,e=this.childNodes.length;b<e;b++)if(a===this.childNodes[b])return this.childNodes.splice(b,1)[0];throw Error("Node was not found");};k.prototype._clone=function(){return new Node};o.inherits(m,k);m.eventTrackerId=1;m.prototype.nodeType=1;m.prototype._clone=function(){return new m(this.tagName,o.extend({},this.attributes))};m.prototype.toString=function(a){var a="undefined"!=typeof a?a:!1,f=r[this.tagName]?this.tagName:l(this.tagName),e=["<"+
f],d;for(d in this.attributes)if("innerHTML"!==d)if(x[d]){if(!0===a&&!this.eventsFound)this.eventsFound=!0}else e.push(" "+l(d.toLowerCase())+'="'+l(this.attributes[d])+'"');if(this.eventsFound&&!o.hasOwn(this.attributes,"id"))this.id="__DB"+m.eventTrackerId++ +"__",e.push(' id="'+this.id+'"');e.push(">");if(u[f])return e.join("");if(o.hasOwn(this.attributes,"innerHTML"))e.push(this.attributes.innerHTML);else{d=0;for(var h=this.childNodes.length,j;d<h;d++)j=this.childNodes[d],j instanceof m||j instanceof
g?e.push(j.toString(a)):e.push(b(""+j))}e.push("</"+f+">");return e.join("")};m.prototype.addEvents=function(){if(this.eventsFound){var a=o.hasOwn(this.attributes,"id")?l(this.attributes.id):this.id,b;for(b in this.attributes)x[b]&&q(a,b,this.attributes[b]);delete this.eventsFound;delete this.id}a=0;b=this.childNodes.length;for(var d;a<b;a++)d=this.childNodes[a],d instanceof m&&d.addEvents()};m.prototype.insertWithEvents=function(a){s(a,this.toString(!0));this.addEvents()};o.inherits(n,k);n.prototype._clear=
function(){this.childNodes=[];this.firstChild=null};n.prototype._clone=function(){return new n};n.prototype.nodeType=11;n.prototype.nodeName=a;n.prototype.toString=function(a){for(var a="undefined"!=typeof a?a:!1,d=[],e=0,j=this.childNodes.length,h;e<j;e++)h=this.childNodes[e],h instanceof m||h instanceof g?d.push(h.toString(a)):d.push(b(""+h));return d.join("")};n.prototype.addEvents=function(){for(var a=0,b=this.childNodes.length,d;a<b;a++)d=this.childNodes[a],d instanceof m&&d.addEvents()};n.prototype.insertWithEvents=
function(a){s(a,this.toString(!0));this.addEvents()};d.addMode({name:"html",createElement:function(a,b,d){return new m(a,b,d)},textNode:function(a){return a},fragment:function(a){return new n(a)},isModeObject:function(a){return a instanceof k||a instanceof g},api:{escapeHTML:b,conditionalEscape:l,isSafe:w,markSafe:j,SafeString:g,HTMLNode:k,MockElement:m,MockFragment:n},apply:{isSafe:w,markSafe:j}})});v.define("./dombuilder/template",function(d,h,a){function g(i,a){for(var b=[],c=0,d=i.length,e;c<
d;c++)e=i[c],e instanceof a&&b.push(e),e instanceof f&&"undefined"!=typeof e.contents&&b.push.apply(b,g(e.contents,a));return b}function j(i){return i.replace("\\","\\\\").replace('"','\\"')}function w(i,a){for(var b=[],c=0,d=i.length,e;c<d;c++)(e=i[c])&&(e instanceof f||z.Function(e.render))?b.push(e.render(a)):b.push(e);return b}function l(){this.message="pop() was called more times than push()"}function k(i){this.message=i}function m(i){this.message=i}function n(i){this.message=i}function o(i,
a){return(z.Array(i)?x(i):v(i)).render(a)}function v(i){if("undefined"==typeof J[i])throw new n(i);return J[i]}function x(i){for(var a=[],b=0,c=i.length;b<c;b++)try{return v(i[b])}catch(d){a.push(i[b])}throw new n(a.join(", "));}function s(i){this.variable=new r(i)}function r(i,a){this.expr=i;this.callFunctions="undefined"!=typeof a?a:!0}function u(i){if(!(this instanceof u))return new u(i);this.stack=[i||{}];this.renderContext=new q}function q(i){this.stack=[i||{}]}function b(){this.blocks={}}function c(i,
a){z.String(i)?this.name=i:(this.name=i.name,this.parent=i.extend||null);this.contents=a;for(var b=g(a,e),c={},d,h=0;d=b[h];h++){if("undefined"!=typeof c[d.name])throw new m("Block with name '"+d.name+"' appears more than once.");c[d.name]=d}this.blocks=c;f.prototype.parseContents.call(this);J[this.name]=this}function f(i){this.contents=i||[];this.contents.length&&this.parseContents()}function e(i,a){this.name=z.String(i)?i:i.name;f.call(this,a)}function A(i,a,b){this.template=i;this.extraContext=
a||{};this.only=b||!1}function t(i,a,b){this.tagName=i;this.attributes=p.extend({},a);this.dynamicAttrs=!1;for(var c in this.attributes)if(i=this.attributes[c],z.String(i)&&K.test(i)){if(this.attributes[c]=new B(i),!this.dynamicAttrs)this.dynamicAttrs=!0}else if((i instanceof f||i instanceof r)&&!this.dynamicAttrs)this.dynamicAttrs=!0;f.call(this,b)}function y(i,a){this._parseExpr(i);this.emptyContents=a.length&&a[a.length-1]instanceof F?a.pop().contents:[];f.call(this,a)}function F(i){f.call(this,
i)}function G(i,a){this.test=z.Function(i)?i:this._parseExpr(i);this.elseContents=a.length&&a[a.length-1]instanceof H?a.pop().contents:[];f.call(this,a)}function H(a){f.call(this,a)}function B(a){(this.dynamic=K.test(a))?this.func=this._parseExpr(a):this.text=a}function D(a,b){this.values=a;b=p.extend({as:null,silent:!1},b||{});this.variableName=b.as;this.silent=b.silent;this.id="cycle"+D.cycleId++}function L(a){this.version=a||5}var I=a("./core"),z=a("isomorph/lib/is"),p=a("isomorph/lib/object"),
C=a("isomorph/lib/array"),E=Array.prototype.slice,Q=/( in )([\w_]+)$/,R=/, ?/,K=/{{(.*?)}}/,O=/^\s+|\s+$/g,P={4:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">',5:"<!DOCTYPE html>"},J={},M=function(){var a={};return function(b,c){c.global||(p.hasOwn(a,c.source)||(a[c.source]=RegExp(c.source,"g")),c=a[c.source]);for(var d=[],e,g,f=0;e=c.exec(b);)g=e.index+e[0].length,g>f&&(d.push(b.slice(f,e.index)),1<e.length&&e.index<b.length&&d.push.apply(d,e.slice(1)),
f=g),c.lastIndex===e.index&&c.lastIndex++;d.push(b.slice(f));return d}}();p.inherits(l,Error);p.inherits(k,Error);p.inherits(m,Error);p.inherits(n,Error);s.prototype.resolve=s.prototype.render=function(a,b){var c;if(this.variable instanceof r)try{c=this.variable.resolve(a)}catch(d){if(!(d instanceof k))throw d;if(b)c=null;else throw d;}else c=this.variable;return c};r.prototype.resolve=r.prototype.render=function(a){var b=this.expr.split("."),c=b.shift(),d=a.get(c);if(a.hasKey(c))z.Function(d)&&this.callFunctions&&
(d=d());else throw new k("Could not find ["+c+"] in "+a);if(b.length)for(var a=b.length,e=0;e<a;e++){c=b[e];if(null==d||"undefined"==typeof d[c])throw new k("Could not find ["+c+"] in "+d);c=d[c];d=z.Function(c)&&this.callFunctions?c.call(d):c}return d};u.prototype.push=function(a){this.stack.push(a||{})};u.prototype.pop=function(){if(1==this.stack.length)throw new l;return this.stack.pop()};u.prototype.set=function(a,b){this.stack[this.stack.length-1][a]=b};u.prototype.zip=function(a,b){for(var c=
this.stack[this.stack.length-1],d=Math.min(a.length,b.length),e=0;e<d;e++)c[a[e]]=b[e]};u.prototype.get=function(a,b){for(var c=this.stack.length-1;0<=c;c--)if(p.hasOwn(this.stack[c],a))return this.stack[c][a];return void 0!==b?b:null};u.prototype.hasKey=function(a){for(var b=0,c=this.stack.length;b<c;b++)if(p.hasOwn(this.stack[b],a))return!0;return!1};p.inherits(q,u);q.prototype.get=function(a,b){var c=this.stack[this.stack.length-1];return p.hasOwn(c,a)?c[a]:void 0!==b?b:null};q.prototype.hasKey=
function(a){return p.hasOwn(this.stack[this.stack.length-1],a)};b.prototype.addBlocks=function(a){for(var b in a)"undefined"!=typeof this.blocks[b]?this.blocks[b].unshift(a[b]):this.blocks[b]=[a[b]]};b.prototype.push=function(a,b){this.blocks[a].push(b)};b.prototype.pop=function(a){return"undefined"!=typeof this.blocks[a]&&this.blocks[a].length?this.blocks[a].pop():null};b.prototype.getBlock=function(a){return"undefined"!=typeof this.blocks[a]&&(a=this.blocks[a],a.length)?a[a.length-1]:null};c.prototype.render=
function(a){a instanceof u||(a=u(a));a.renderContext.push();try{return this._render(a)}finally{a.renderContext.pop()}};c.prototype._render=function(a){a.renderContext.hasKey("blockContext")||a.renderContext.set("blockContext",new b);a.renderContext.get("blockContext").addBlocks(this.blocks);return this.parent?v(this.parent)._render(a):I.fragment(w(this.contents,a))};f.prototype.parseContents=function(){for(var a=0,b=this.contents.length,c;a<b;a++)c=this.contents[a],z.String(c)&&K.test(c)&&(this.contents[a]=
new B(c))};p.inherits(e,f);e.prototype.render=function(a){var b=a.renderContext.get("blockContext"),c,d;a.push();null===b?(a.set("block",this),c=w(this.contents,a)):(d=c=b.pop(this.name),null===c&&(c=this),c=new e(c.name,c.contents),c.context=a,a.set("block",c),c=w(c.contents,a),null!==d&&b.push(this.name,d));a.pop();return c};e.prototype["super"]=function(){var a=this.context.renderContext;return a.hasKey("blockContext")&&null!==a.get("blockContext").getBlock(this.name)?this.render(this.context):
""};p.inherits(A,f);A.prototype.render=function(a){var b=this.template instanceof r?this.template.resolve(a):this.template,b=z.Array(b)?x(b):v(b),c={},d,e;for(d in this.extraContext)e=this.extraContext[d],c[d]=e instanceof r?e.resolve(a):e;if(this.only)return b.render(c);a.push(c);d=b.render(a);a.pop();return d};p.inherits(t,f);t.prototype.render=function(a){return I.createElement(this.tagName,this.dynamicAttrs?this.renderAttributes(a):this.attributes,w(this.contents,a))};t.prototype.renderAttributes=
function(a){var b={},c,d;for(c in this.attributes)d=this.attributes[c],d instanceof f?(d=d.render(a),z.Array(d)&&(d=C.flatten(d).join("")),b[c]=d):b[c]=d instanceof r?d.resolve(a):d;return b};p.inherits(y,f);y.prototype._parseExpr=function(a){var b=M(a,Q);if(4!=b.length||" in "!=b[1]||""!==b[3])throw new m("Invalid ForNode expression: "+a);this.loopVars=b[0].split(R);this.listVar=new r(b[2])};y.prototype.render=function(a){var b=this.listVar.resolve(a),c=[],d={parentloop:a.get("forloop",{})},e=b.length,
g;if(1>b.length)return w(this.emptyContents,a);a.push();a.set("forloop",d);for(var f=0;f<e;f++)g=b[f],1===this.loopVars.length?a.set(this.loopVars[0],g):a.zip(this.loopVars,g),d.counter=f+1,d.counter0=f,d.revcounter=e-f,d.revcounter0=e-f-1,d.first=0===f,d.last=f===e-1,c.push.apply(c,w(this.contents,a));a.pop();return c};p.inherits(F,f);F.prototype.render=function(){return[]};p.inherits(G,f);G.prototype._parseExpr=function(){var a=p.lookup("( ) && || == === <= < >= > != !== !! !".split(" ")),b=/(\(|\)|&&|\|\||={2,3}|<=|<|>=|>|!={1,2}|!{1,2})/,
c=/^-?(?:\d+(?:\.\d+)?|(?:\d+)?\.\d+)$/,d=p.lookup(['"',"'"]),e=function(a){var b=a.charAt(0);return 1<a.length&&"undefined"!=typeof d[b]&&a.lastIndexOf(b)==a.length-1};return function(d){for(var f=["return ("],g=M(d,b),h=0,k=g.length,l;h<k;h++)l=g[h],"undefined"!=typeof a[l]?f.push(l):(l=l.replace(O,""))&&(c.test(l)||e(l)?f.push(l):f.push('new FilterExpression("'+j(l)+'").resolve(c, true)'));f.push(");");try{var n=new Function("c","FilterExpression",f.join(" "));return function(a){return n(a,s)}}catch(o){throw new m("Invalid $if expression ("+
o.message+"): "+d);}}}();G.prototype.render=function(a){return w(this.test(a)?this.contents:this.elseContents,a)};p.inherits(H,f);H.prototype.render=function(){return[]};p.inherits(B,f);B.prototype._parseExpr=function(a){for(var b=["var a = []"],a=M(a,K),c=0,d=a.length,e;c<d;c++)e=a[c],c%2?b.push('a.push(new Variable("'+j(e.replace(O,""))+'").resolve(c))'):e&&b.push('a.push("'+j(e)+'")');b.push("return a");var f=new Function("c","Variable",b.join(";"));return function(a){return f(a,r)}};B.prototype.render=
function(a){return this.dynamic?this.func(a):[this.text]};p.inherits(D,f);D.cycleId=1;D.prototype.render=function(a){var b=a.renderContext.get(this.id,0),c=this.values[b];a.renderContext.set(this.id,(b+1)%this.values.length);c instanceof r&&(c=c.resolve(a));this.variableName&&a.set(this.variableName,c);return this.silent?[]:c};p.inherits(L,f);L.prototype.render=function(){var a=P[this.version]||"";return I.html?I.html.markSafe(a):a};I.addMode({name:"template",createElement:function(a,b,c){return new t(a,
b,c)},textNode:function(a){return a},fragment:function(a){return a},isModeObject:function(a){return a instanceof f||a instanceof r},api:{DOCTYPES:P,templates:J,ContextPopError:l,VariableNotFoundError:k,TemplateSyntaxError:m,TemplateNotFoundError:n,renderTemplate:o,getTemplate:v,selectTemplate:x,FilterExpression:s,Variable:r,Context:u,RenderContext:q,BlockContext:b,Template:c,TemplateNode:f,BlockNode:e,IncludeNode:A,ElementNode:t,ForNode:y,EmptyNode:F,IfNode:G,ElseNode:H,TextNode:B,CycleNode:D},apply:{Context:u,
renderTemplate:o,$template:function(a){return new c(a,C.flatten(E.call(arguments,1)))},$doctype:function(a){return new L(a)},$block:function(a){return new e(a,C.flatten(E.call(arguments,1)))},$include:function(a,b,c){return new A(a,b,c)},$var:function(a){return new r(a)},$func:function(a){return new r(a,!1)},$text:function(a){return new B(a)},$for:function(a){return new y(a,C.flatten(E.call(arguments,1)))},$empty:function(){return new F(C.flatten(E.call(arguments)))},$if:function(a){return new G(a,
C.flatten(E.call(arguments,1)))},$else:function(){return new H(C.flatten(E.call(arguments)))},$cycle:function(a,b){return new D(a,b)}}})});v.define("DOMBuilder",function(d,h,a){h=a("./dombuilder/core");a("./dombuilder/dom");a("./dombuilder/html");a("./dombuilder/template");d.exports=h});window.DOMBuilder=A.DOMBuilder})();