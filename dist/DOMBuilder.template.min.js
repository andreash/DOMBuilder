/**
 * DOMBuilder 2.1.1 (modes: dom [default], html, template) - https://github.com/insin/DOMBuilder
 * MIT Licensed
 */
(function(){function v(d){return A[d]}var A={};v.define=function(d,f){var a={},g={};a.exports=g;f(a,g,v);if("[object Array]"==Object.prototype.toString.call(d))for(var g=0,i=d.length;g<i;g++)A[d[g]]=a.exports;else A[d]=a.exports};v.define(["isomorph/lib/is","./is"],function(d){var f=Object.prototype.toString;d.exports={Array:function(a){return"[object Array]"==f.call(a)},Boolean:function(a){return"[object Boolean]"==f.call(a)},Date:function(a){return"[object Date]"==f.call(a)},Empty:function(a){for(var g in a)return!1;
return!0},Error:function(a){return"[object Error]"==f.call(a)},Function:function(a){return"[object Function]"==f.call(a)},NaN:isNaN,Number:function(a){return"[object Number]"==f.call(a)},Object:function(a){return"[object Object]"==f.call(a)},RegExp:function(a){return"[object RegExp]"==f.call(a)},String:function(a){return"[object String]"==f.call(a)}}});v.define("isomorph/lib/object",function(d){var f=function(){var a=Object.prototype.hasOwnProperty;return function(g,i){return a.call(g,i)}}();d.exports=
{hasOwn:f,extend:function(a){for(var g=1,i=arguments.length,d;g<i;g++)if(d=arguments[g])for(var o in d)f(d,o)&&(a[o]=d[o]);return a},inherits:function(a,g){var i=function(){};i.prototype=g.prototype;a.prototype=new i;return a.prototype.constructor=a},items:function(a){var g=[],i;for(i in a)f(a,i)&&g.push([i,a[i]]);return g},fromItems:function(a){for(var g={},i=0,d=a.length,f;i<d;i++)f=a[i],g[f[0]]=f[1];return g},lookup:function(a){for(var g={},i=0,d=a.length;i<d;i++)g[""+a[i]]=!0;return g},get:function(a,
g,i){return f(a,g)?a[g]:i}}});v.define("isomorph/lib/array",function(d,f,a){var g=a("./is"),i=Array.prototype.splice;d.exports={flatten:function(a){for(var d=0,f=a.length,l;d<f;d++)l=a[d],g.Array(l)&&(f+=l.length-1,i.apply(a,[d,1].concat(l)),d--);return a}}});v.define(["./dombuilder/core","./core"],function(d,f,a){function g(b,c){return!!b&&"[object Object]"==x.call(b)&&(!c||!q.modes[c].isModeObject(b))}function i(b){return"[object Array]"==x.call(b)&&"undefined"==typeof b.isElement}function w(b){b.isElement=
!0;return b}function o(b){for(var c={},h=0,e;e=r[h];h++)c[e.toUpperCase()]=k(e,b);return c}function k(b,c){var h=function(){if(arguments.length){var e=s.call(arguments),h,a=e.length,l=e[0];if(1===a&&i(l))e=l;else if(g(l,"undefined"!=typeof c?c:q.mode))h=l,e=2==a&&i(e[1])?e[1]:e.slice(1);return q.createElement(b,h,e,c)}return(h="undefined"!=typeof c?c:q.mode)?q.modes[h].createElement(b,{},[]):w([b])};h.map=function(){var e=s.call(arguments);if(i(e[0]))var h={},a=e[0],e=m.Function(e[1])?e[1]:null;else h=
e[0],a=e[1],e=m.Function(e[2])?e[2]:null;return q.map(b,h,a,e,c)};return h}function l(b,c){return{index:b,first:0==b,last:b==c-1}}var m=a("isomorph/lib/is"),n=a("isomorph/lib/object"),N=a("isomorph/lib/array"),x=Object.prototype.toString,s=Array.prototype.slice,a=(f="undefined"!=typeof jQuery)?jQuery.attrFn:n.lookup("blur,focus,focusin,focusout,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error".split(",")),
r="a,abbr,acronym,address,area,article,aside,audio,b,bdi,bdo,big,blockquote,body,br,button,canvas,caption,cite,code,col,colgroup,command,datalist,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,frame,frameset,h1,h2,h3,h4,h5,h6,hr,head,header,hgroup,html,i,iframe,img,input,ins,kbd,keygen,label,legend,li,link,map,mark,meta,meter,nav,noscript,object,ol,optgroup,option,output,p,param,pre,progress,q,rp,rt,ruby,samp,script,section,select,small,source,span,strong,style,sub,summary,sup,table,tbody,td,textarea,tfoot,th,thead,time,title,tr,track,tt,ul,var,video,wbr".split(","),
u=f?function(b,c){jQuery(b).html(c)}:function(b,c){try{b.innerHTML=c}catch(h){var e=document.createElement("div");for(e.innerHTML=c;b.firstChild;)b.removeChild(b.firstChild);for(;e.firstChild;)b.appendChild(e.firstChild)}},q={version:"2.1.1",mode:null,modes:{},addMode:function(b){b=n.extend({isModeObject:function(){return!1},api:{},apply:{}},b);this.modes[b.name]=b;this[b.name]=n.extend(o(b.name),b.apply);null===this.mode&&(this.mode=b.name)},withMode:function(b,c){var h=this.mode;this.mode=b;try{return c.apply(null,
s.call(arguments,2))}finally{this.mode=h}},elements:o(),array:o(null),apply:function(b,c){c&&this.modes[c]?n.extend(b,this[c]):n.extend(b,this.elements);return b},build:function(b,c){for(var c=c||this.mode,h=b[0],e="#document-fragment"==h,a=!e&&g(b[1],c)?b[1]:null,l=b.length,q=[],d,i=null===a?1:2;i<l;i++)d=b[i],m.Array(d)?q.push(this.build(d,c)):q.push(d);return e?this.modes[c].fragment(q):this.modes[c].createElement(h,a,q)},createElement:function(b,c,h,e){c=c||{};h=h||[];if(e="undefined"!=typeof e?
e:this.mode)return N.flatten(h),this.modes[e].createElement(b,c,h);var b=[b],a;for(a in c){b.push(c);break}h.length&&(b=b.concat(h));return w(b)},textNode:function(b,c){c="undefined"!=typeof c?c:this.mode;return this.modes[c].textNode(b)},map:function(b,c,h,e,a){for(var d=[],g=0,m=h.length,f,k;g<m;g++){f=n.extend({},c);if(null!=e){if(k="undefined"!=typeof a?q.withMode(a,e,h[g],f,l(g,m)):e(h[g],f,l(g,m)),null===k)continue}else k=h[g];i(k)||(k=[k]);d.push(this.createElement(b,f,k,a))}return d},fragment:function(){var b=
function(){var c;c=1===arguments.length&&i(arguments[0])?arguments[0]:s.call(arguments);return this.mode?(N.flatten(c),this.modes[this.mode].fragment(c)):w(["#document-fragment"].concat(c))};b.map=function(c,b){if(!m.Function(b))return q.fragment(c);for(var e=[],a=0,g=c.length,d;a<g;a++)d=b(c[a],l(a,g)),null!==d&&(e=e.concat(d));return q.fragment(e)};return b}(),util:{EVENT_ATTRS:a,FRAGMENT_NAME:"#document-fragment",JQUERY_AVAILABLE:f,TAG_NAMES:r,setInnerHTML:u}};d.exports=q});v.define("./dombuilder/dom",
function(d,f,a){var d=a("./core"),g=a("isomorph/lib/object"),i=window.document,w=d.util.EVENT_ATTRS,o=d.util.setInnerHTML,k=d.util.JQUERY_AVAILABLE?function(a,d){if(g.hasOwn(d,"innerHTML")){var i=d.innerHTML;delete d.innerHTML;return jQuery("<"+a+">",d).html(i).get(0)}return jQuery("<"+a+">",d).get(0)}:function(){var a={tabindex:"tabIndex"},d={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",
colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},f=function(){var a=i.createElement("div");a.setAttribute("className","t");a.innerHTML='<span style="color:silver">s<span>';var b=a.getElementsByTagName("span")[0],c=i.createElement("input");c.value="t";c.setAttribute("type","radio");return{style:/silver/.test(b.getAttribute("style")),getSetAttribute:"t"!=a.className,radioValue:"t"==c.value}}(),k,x=function(a,b,c){!1!==b&&(b=d[c]||c,b in a&&(a[b]=!0),a.setAttribute(c,
c.toLowerCase()));return c},s={type:function(a,b){if(!f.radioValue&&"radio"==b&&a.nodeName&&"INPUT"==a.nodeName.toUpperCase()){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}},value:function(a,b,c){if(k&&a.nodeName&&"BUTTON"==a.nodeName.toUpperCase())return k(a,b,c);a.value=b}},r=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,u=/\:|^on/;f.getSetAttribute||(a=d,k=s.name=s.title=function(a,b,c){if(a=a.getAttributeNode(c))return a.nodeValue=
b},s.width=s.height=function(a,b){if(""===b)return a.setAttribute(name,"auto"),b});f.style||(s.style=function(a,b){return a.style.cssText=""+b});return function(f,b){var c=i.createElement(f),h,e;g.hasOwn(b,"innerHTML")&&(o(c,b.innerHTML),delete b.innerHTML);for(h in b)if(e=b[h],w[h])c["on"+h]=e;else{var n=c,t=h;if("getAttribute"in n){var y=void 0,t=a[t]||t,y=s[t];if(!y)if(r.test(t))y=x;else if(k&&"className"!=t&&(n.nodeName&&"FORM"==n.nodeName.toUpperCase()||u.test(t)))y=k;void 0!==e&&!(y&&void 0!==
y(n,e,t))&&n.setAttribute(t,""+e)}else t=d[t]||t,void 0!==e&&(n[t]=e)}return c}}();d.addMode({name:"dom",createElement:function(a,d,f){var o=g.hasOwn(d,"innerHTML"),a=k(a,d);if(!o)for(var o=0,d=f.length,x;o<d;o++)(x=f[o])&&x.nodeType?a.appendChild(x):a.appendChild(i.createTextNode(""+x));return a},textNode:function(a){return i.createTextNode(a)},fragment:function(a){for(var d=i.createDocumentFragment(),g=0,f=a.length,k;g<f;g++)k=a[g],k.nodeType?d.appendChild(k):d.appendChild(i.createTextNode(""+k));
return d},isModeObject:function(a){return!!a.nodeType},api:{createElement:k}})});v.define("./dombuilder/html",function(d,f,a){function g(c){this.value=c}function i(c){return new g(c)}function w(c){return c instanceof g}function o(c){return c instanceof g?c.value:b(""+c)}function k(c){this.childNodes=c||[];this._inlineFragments();this.firstChild=this.childNodes.length?this.childNodes[0]:null}function l(c,a,b){k.call(this,b);this.tagName=this.nodeName=c.toLowerCase();this.attributes=a||{}}function m(c){k.call(this,
c)}var d=a("./core"),n=a("isomorph/lib/object"),v=Array.prototype.splice,x=d.util.EVENT_ATTRS,a=d.util.FRAGMENT_NAME,f=d.util.JQUERY_AVAILABLE,s=d.util.setInnerHTML,r=n.lookup(d.util.TAG_NAMES),u=n.lookup("area,base,br,col,command,embed,frame,hr,input,img,keygen,link,meta,param,source,track,wbr".split(",")),q=f?function(c,a,b){jQuery("#"+c)[a](b)}:function(c,a,b){document.getElementById(c)["on"+a]=b};n.inherits(g,String);g.prototype.toString=g.prototype.valueOf=function(){return this.value};var b=
function(){var c=/&/g,a=/</g,b=/>/g,d=/"/g,g=/'/g;return function(f){return f.replace(c,"&amp;").replace(a,"&lt;").replace(b,"&gt;").replace(d,"&quot;").replace(g,"&#39;")}}();n.inherits(k,Object);k.prototype._inlineFragments=function(){for(var c=0,a=this.childNodes.length,b;c<a;c++)b=this.childNodes[c],b instanceof m&&(v.apply(this.childNodes,[c,1].concat(b.childNodes)),b._clear())};k.prototype.appendChild=function(a){a instanceof m?(this.childNodes=this.childNodes.concat(a.childNodes),a._clear()):
this.childNodes.push(a);null===this.firstChild&&(this.firstChild=this.childNodes[0])};k.prototype.cloneNode=function(a){var b=this._clone();if(!0===a)for(var e=0,d=this.childNodes.length,g;e<d;e++)g=this.childNodes[e],g instanceof l&&(g=g.cloneNode(a)),0===e&&(b.firstChild=g),b.childNodes.push(g);return b};k.prototype.hasChildNodes=function(){return!!this.childNodes.length};k.prototype.removeChild=function(a){if(null!==this.firstChild&&a===this.firstChild)return this.firstChild=1<this.childNodes.length?
this.childNodes[1]:null,this.childNodes.shift();for(var b=1,e=this.childNodes.length;b<e;b++)if(a===this.childNodes[b])return this.childNodes.splice(b,1)[0];throw Error("Node was not found");};k.prototype._clone=function(){return new Node};n.inherits(l,k);l.eventTrackerId=1;l.prototype.nodeType=1;l.prototype._clone=function(){return new l(this.tagName,n.extend({},this.attributes))};l.prototype.toString=function(a){var a="undefined"!=typeof a?a:!1,d=r[this.tagName]?this.tagName:o(this.tagName),e=["<"+
d],f;for(f in this.attributes)"innerHTML"!==f&&(x[f]?!0===a&&!this.eventsFound&&(this.eventsFound=!0):e.push(" "+o(f.toLowerCase())+'="'+o(this.attributes[f])+'"'));this.eventsFound&&!n.hasOwn(this.attributes,"id")&&(this.id="__DB"+l.eventTrackerId++ +"__",e.push(' id="'+this.id+'"'));e.push(">");if(u[d])return e.join("");if(n.hasOwn(this.attributes,"innerHTML"))e.push(this.attributes.innerHTML);else{f=0;for(var i=this.childNodes.length,k;f<i;f++)k=this.childNodes[f],k instanceof l||k instanceof g?
e.push(k.toString(a)):e.push(b(""+k))}e.push("</"+d+">");return e.join("")};l.prototype.addEvents=function(){if(this.eventsFound){var a=n.hasOwn(this.attributes,"id")?o(this.attributes.id):this.id,b;for(b in this.attributes)x[b]&&q(a,b,this.attributes[b]);delete this.eventsFound;delete this.id}a=0;b=this.childNodes.length;for(var e;a<b;a++)e=this.childNodes[a],e instanceof l&&e.addEvents()};l.prototype.insertWithEvents=function(a){s(a,this.toString(!0));this.addEvents()};n.inherits(m,k);m.prototype._clear=
function(){this.childNodes=[];this.firstChild=null};m.prototype._clone=function(){return new m};m.prototype.nodeType=11;m.prototype.nodeName=a;m.prototype.toString=function(a){for(var a="undefined"!=typeof a?a:!1,d=[],e=0,f=this.childNodes.length,i;e<f;e++)i=this.childNodes[e],i instanceof l||i instanceof g?d.push(i.toString(a)):d.push(b(""+i));return d.join("")};m.prototype.addEvents=function(){for(var a=0,b=this.childNodes.length,e;a<b;a++)e=this.childNodes[a],e instanceof l&&e.addEvents()};m.prototype.insertWithEvents=
function(a){s(a,this.toString(!0));this.addEvents()};d.addMode({name:"html",createElement:function(a,b,e){return new l(a,b,e)},textNode:function(a){return a},fragment:function(a){return new m(a)},isModeObject:function(a){return a instanceof k||a instanceof g},api:{escapeHTML:b,conditionalEscape:o,isSafe:w,markSafe:i,SafeString:g,HTMLNode:k,MockElement:l,MockFragment:m},apply:{isSafe:w,markSafe:i}})});v.define("./dombuilder/template",function(d,f,a){function g(j,a){for(var b=[],c=0,e=j.length,d;c<
e;c++)d=j[c],d instanceof a&&b.push(d),d instanceof h&&"undefined"!=typeof d.contents&&b.push.apply(b,g(d.contents,a));return b}function i(j){return j.replace("\\","\\\\").replace('"','\\"')}function w(j,a){for(var b=[],c=0,d=j.length,e;c<d;c++)(e=j[c])&&(e instanceof h||z.Function(e.render))?b.push(e.render(a)):b.push(e);return b}function o(){this.message="pop() was called more times than push()"}function k(j){this.message=j}function l(j){this.message=j}function m(j){this.message=j}function n(j,
a){return(z.Array(j)?x(j):v(j)).render(a)}function v(j){if("undefined"==typeof J[j])throw new m(j);return J[j]}function x(j){for(var a=[],b=0,c=j.length;b<c;b++)try{return v(j[b])}catch(e){a.push(j[b])}throw new m(a.join(", "));}function s(j){this.variable=new r(j)}function r(j,a){this.expr=j;this.callFunctions="undefined"!=typeof a?a:!0}function u(j){if(!(this instanceof u))return new u(j);this.stack=[j||{}];this.renderContext=new q}function q(j){this.stack=[j||{}]}function b(){this.blocks={}}function c(j,
a){z.String(j)?this.name=j:(this.name=j.name,this.parent=j.extend||null);this.contents=a;for(var b=g(a,e),c={},d,f=0;d=b[f];f++){if("undefined"!=typeof c[d.name])throw new l("Block with name '"+d.name+"' appears more than once.");c[d.name]=d}this.blocks=c;h.prototype.parseContents.call(this);J[this.name]=this}function h(j){this.contents=j||[];this.contents.length&&this.parseContents()}function e(j,a){this.name=z.String(j)?j:j.name;h.call(this,a)}function A(j,a,b){this.template=j;this.extraContext=
a||{};this.only=b||!1}function t(j,a,b){this.tagName=j;this.attributes=p.extend({},a);this.dynamicAttrs=!1;for(var c in this.attributes)if(j=this.attributes[c],z.String(j)&&K.test(j))this.attributes[c]=new B(j),this.dynamicAttrs||(this.dynamicAttrs=!0);else if((j instanceof h||j instanceof r)&&!this.dynamicAttrs)this.dynamicAttrs=!0;h.call(this,b)}function y(j,a){this._parseExpr(j);this.emptyContents=a.length&&a[a.length-1]instanceof F?a.pop().contents:[];h.call(this,a)}function F(a){h.call(this,
a)}function G(a,b){this.test=z.Function(a)?a:this._parseExpr(a);this.elseContents=b.length&&b[b.length-1]instanceof H?b.pop().contents:[];h.call(this,b)}function H(a){h.call(this,a)}function B(a){(this.dynamic=K.test(a))?this.func=this._parseExpr(a):this.text=a}function D(a,b){this.values=a;b=p.extend({as:null,silent:!1},b||{});this.variableName=b.as;this.silent=b.silent;this.id="cycle"+D.cycleId++}function L(a){this.version=a||5}var I=a("./core"),z=a("isomorph/lib/is"),p=a("isomorph/lib/object"),
C=a("isomorph/lib/array"),E=Array.prototype.slice,Q=/( in )([\w_]+)$/,R=/, ?/,K=/{{(.*?)}}/,O=/^\s+|\s+$/g,P={4:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">',5:"<!DOCTYPE html>"},J={},M=function(){var a={};return function(b,c){c.global||(p.hasOwn(a,c.source)||(a[c.source]=RegExp(c.source,"g")),c=a[c.source]);for(var d=[],e,g,f=0;e=c.exec(b);)g=e.index+e[0].length,g>f&&(d.push(b.slice(f,e.index)),1<e.length&&e.index<b.length&&d.push.apply(d,e.slice(1)),
f=g),c.lastIndex===e.index&&c.lastIndex++;d.push(b.slice(f));return d}}();p.inherits(o,Error);p.inherits(k,Error);p.inherits(l,Error);p.inherits(m,Error);s.prototype.resolve=s.prototype.render=function(a,b){var c;if(this.variable instanceof r)try{c=this.variable.resolve(a)}catch(d){if(!(d instanceof k))throw d;if(b)c=null;else throw d;}else c=this.variable;return c};r.prototype.resolve=r.prototype.render=function(a){var b=this.expr.split("."),c=b.shift(),d=a.get(c);if(a.hasKey(c))z.Function(d)&&this.callFunctions&&
(d=d());else throw new k("Could not find ["+c+"] in "+a);if(b.length)for(var a=b.length,e=0;e<a;e++){c=b[e];if(null==d||"undefined"==typeof d[c])throw new k("Could not find ["+c+"] in "+d);c=d[c];d=z.Function(c)&&this.callFunctions?c.call(d):c}return d};u.prototype.push=function(a){this.stack.push(a||{})};u.prototype.pop=function(){if(1==this.stack.length)throw new o;return this.stack.pop()};u.prototype.set=function(a,b){this.stack[this.stack.length-1][a]=b};u.prototype.zip=function(a,b){for(var c=
this.stack[this.stack.length-1],d=Math.min(a.length,b.length),e=0;e<d;e++)c[a[e]]=b[e]};u.prototype.get=function(a,b){for(var c=this.stack.length-1;0<=c;c--)if(p.hasOwn(this.stack[c],a))return this.stack[c][a];return void 0!==b?b:null};u.prototype.hasKey=function(a){for(var b=0,c=this.stack.length;b<c;b++)if(p.hasOwn(this.stack[b],a))return!0;return!1};p.inherits(q,u);q.prototype.get=function(a,b){var c=this.stack[this.stack.length-1];return p.hasOwn(c,a)?c[a]:void 0!==b?b:null};q.prototype.hasKey=
function(a){return p.hasOwn(this.stack[this.stack.length-1],a)};b.prototype.addBlocks=function(a){for(var b in a)"undefined"!=typeof this.blocks[b]?this.blocks[b].unshift(a[b]):this.blocks[b]=[a[b]]};b.prototype.push=function(a,b){this.blocks[a].push(b)};b.prototype.pop=function(a){return"undefined"!=typeof this.blocks[a]&&this.blocks[a].length?this.blocks[a].pop():null};b.prototype.getBlock=function(a){return"undefined"!=typeof this.blocks[a]&&(a=this.blocks[a],a.length)?a[a.length-1]:null};c.prototype.render=
function(a){a instanceof u||(a=u(a));a.renderContext.push();try{return this._render(a)}finally{a.renderContext.pop()}};c.prototype._render=function(a){a.renderContext.hasKey("blockContext")||a.renderContext.set("blockContext",new b);a.renderContext.get("blockContext").addBlocks(this.blocks);return this.parent?v(this.parent)._render(a):I.fragment(w(this.contents,a))};h.prototype.parseContents=function(){for(var a=0,b=this.contents.length,c;a<b;a++)c=this.contents[a],z.String(c)&&K.test(c)&&(this.contents[a]=
new B(c))};p.inherits(e,h);e.prototype.render=function(a){var b=a.renderContext.get("blockContext"),c,d;a.push();null===b?(a.set("block",this),c=w(this.contents,a)):(d=c=b.pop(this.name),null===c&&(c=this),c=new e(c.name,c.contents),c.context=a,a.set("block",c),c=w(c.contents,a),null!==d&&b.push(this.name,d));a.pop();return c};e.prototype["super"]=function(){var a=this.context.renderContext;return a.hasKey("blockContext")&&null!==a.get("blockContext").getBlock(this.name)?this.render(this.context):
""};p.inherits(A,h);A.prototype.render=function(a){var b=this.template instanceof r?this.template.resolve(a):this.template,b=z.Array(b)?x(b):v(b),c={},d,e;for(d in this.extraContext)e=this.extraContext[d],c[d]=e instanceof r?e.resolve(a):e;if(this.only)return b.render(c);a.push(c);d=b.render(a);a.pop();return d};p.inherits(t,h);t.prototype.render=function(a){return I.createElement(this.tagName,this.dynamicAttrs?this.renderAttributes(a):this.attributes,w(this.contents,a))};t.prototype.renderAttributes=
function(a){var b={},c,d;for(c in this.attributes)d=this.attributes[c],d instanceof h?(d=d.render(a),z.Array(d)&&(d=C.flatten(d).join("")),b[c]=d):b[c]=d instanceof r?d.resolve(a):d;return b};p.inherits(y,h);y.prototype._parseExpr=function(a){var b=M(a,Q);if(4!=b.length||" in "!=b[1]||""!==b[3])throw new l("Invalid ForNode expression: "+a);this.loopVars=b[0].split(R);this.listVar=new r(b[2])};y.prototype.render=function(a){var b=this.listVar.resolve(a),c=[],d={parentloop:a.get("forloop",{})},e=b.length,
g;if(1>b.length)return w(this.emptyContents,a);a.push();a.set("forloop",d);for(var f=0;f<e;f++)g=b[f],1===this.loopVars.length?a.set(this.loopVars[0],g):a.zip(this.loopVars,g),d.counter=f+1,d.counter0=f,d.revcounter=e-f,d.revcounter0=e-f-1,d.first=0===f,d.last=f===e-1,c.push.apply(c,w(this.contents,a));a.pop();return c};p.inherits(F,h);F.prototype.render=function(){return[]};p.inherits(G,h);G.prototype._parseExpr=function(){var a=p.lookup("(,),&&,||,==,===,<=,<,>=,>,!=,!==,!!,!".split(",")),b=/(\(|\)|&&|\|\||={2,3}|<=|<|>=|>|!={1,2}|!{1,2})/,
c=/^-?(?:\d+(?:\.\d+)?|(?:\d+)?\.\d+)$/,d=p.lookup(['"',"'"]),e=function(a){var b=a.charAt(0);return 1<a.length&&"undefined"!=typeof d[b]&&a.lastIndexOf(b)==a.length-1};return function(d){for(var f=["return ("],g=M(d,b),h=0,k=g.length,m;h<k;h++)m=g[h],"undefined"!=typeof a[m]?f.push(m):(m=m.replace(O,""))&&(c.test(m)||e(m)?f.push(m):f.push('new FilterExpression("'+i(m)+'").resolve(c, true)'));f.push(");");try{var n=new Function("c","FilterExpression",f.join(" "));return function(a){return n(a,s)}}catch(o){throw new l("Invalid $if expression ("+
o.message+"): "+d);}}}();G.prototype.render=function(a){return w(this.test(a)?this.contents:this.elseContents,a)};p.inherits(H,h);H.prototype.render=function(){return[]};p.inherits(B,h);B.prototype._parseExpr=function(a){for(var b=["var a = []"],a=M(a,K),c=0,d=a.length,e;c<d;c++)e=a[c],c%2?b.push('a.push(new Variable("'+i(e.replace(O,""))+'").resolve(c))'):e&&b.push('a.push("'+i(e)+'")');b.push("return a");var f=new Function("c","Variable",b.join(";"));return function(a){return f(a,r)}};B.prototype.render=
function(a){return this.dynamic?this.func(a):[this.text]};p.inherits(D,h);D.cycleId=1;D.prototype.render=function(a){var b=a.renderContext.get(this.id,0),c=this.values[b];a.renderContext.set(this.id,(b+1)%this.values.length);c instanceof r&&(c=c.resolve(a));this.variableName&&a.set(this.variableName,c);return this.silent?[]:c};p.inherits(L,h);L.prototype.render=function(){var a=P[this.version]||"";return I.html?I.html.markSafe(a):a};I.addMode({name:"template",createElement:function(a,b,c){return new t(a,
b,c)},textNode:function(a){return a},fragment:function(a){return a},isModeObject:function(a){return a instanceof h||a instanceof r},api:{DOCTYPES:P,templates:J,ContextPopError:o,VariableNotFoundError:k,TemplateSyntaxError:l,TemplateNotFoundError:m,renderTemplate:n,getTemplate:v,selectTemplate:x,FilterExpression:s,Variable:r,Context:u,RenderContext:q,BlockContext:b,Template:c,TemplateNode:h,BlockNode:e,IncludeNode:A,ElementNode:t,ForNode:y,EmptyNode:F,IfNode:G,ElseNode:H,TextNode:B,CycleNode:D},apply:{Context:u,
renderTemplate:n,$template:function(a){return new c(a,C.flatten(E.call(arguments,1)))},$doctype:function(a){return new L(a)},$block:function(a){return new e(a,C.flatten(E.call(arguments,1)))},$include:function(a,b,c){return new A(a,b,c)},$var:function(a){return new r(a)},$func:function(a){return new r(a,!1)},$text:function(a){return new B(a)},$for:function(a){return new y(a,C.flatten(E.call(arguments,1)))},$empty:function(){return new F(C.flatten(E.call(arguments)))},$if:function(a){return new G(a,
C.flatten(E.call(arguments,1)))},$else:function(){return new H(C.flatten(E.call(arguments)))},$cycle:function(a,b){return new D(a,b)}}})});v.define("DOMBuilder",function(d,f,a){f=a("./dombuilder/core");a("./dombuilder/dom");a("./dombuilder/html");a("./dombuilder/template");d.exports=f});window.DOMBuilder=A.DOMBuilder})();