/**
 * DOMBuilder 2.0.0-alpha1 (modes: dom [default], html) - https://github.com/insin/DOMBuilder
 * MIT licensed
 */
(function(i){function k(b,a){for(var d in a)b[d]=a[d];return b}function m(b){return p.call(b)==="[object Array]"}function l(b){return p.call(b)==="[object Function]"}function j(b,a){return!!b&&p.call(b)==="[object Object]"&&f.modes[a].isObject(b)}function g(b){for(var a=0,d=b.length,c;a<d;a++)c=b[a],m(c)&&(d+=c.length-1,r.apply(b,[a,1].concat(c)),a--);return b}function h(b){for(var a={},d=0,c;c=e[d];d++)a[c.toUpperCase()]=n(c,b);return a}function n(b,a){var d=function(){if(arguments.length){var c=
q.call(arguments),d,e=c.length,g=c[0];e===1&&m(g)?c=g:j(g,a||f.mode)?(d=g,c=e==2&&m(c[1])?c[1]:q.call(c,1)):c=q.call(c);return f.createElement(b,d,c,a)}else return f.modes[a||f.mode].createElement(b,{},[])};d.map=function(){var c=q.call(arguments);if(m(c[0]))var d={},e=c[0],c=l(c[1])?c[1]:null;else d=c[0],e=c[1],c=l(c[2])?c[2]:null;return f.map(b,d,e,c,a)};return d}var o=typeof module!=="undefined"&&module.exports,p=Object.prototype.toString,q=Array.prototype.slice,r=Array.prototype.splice,e="a abbr acronym address area b bdo big blockquote body br button caption cite code col colgroup dd del dfn div dl dt em fieldset form frame frameset h1 h2 h3 h4 h5 h6 hr head html i iframe img input ins kbd label legend li link map meta noscript object ol optgroup option p param pre q samp script select small span strong style sub sup table tbody td textarea tfoot th thead title tr tt ul var".split(" "),
f={version:"2.0.0-alpha1",mode:o?"html":null,modes:{},addMode:function(b){if(this.mode===null)this.mode=b.name;this.modes[b.name]=b;this[b.name]=k(h(b.name),b.api)},withMode:function(b,a){var d=this.mode;this.mode=b;try{return a.apply(null,q.call(arguments,2))}finally{this.mode=d}},elements:h(),apply:function(b){b=b||{};k(b,this.elements);return b},createElement:function(b,a,d,c){a=a||{};d=d||[];g(d);c=c||this.mode;return this.modes[c].createElement(b,a,d)},map:function(b,a,d,c,e){for(var g=[],h=
0,l=d.length,j,i;h<l;h++){j=k({},a);if(c!==null){if(i=e?f.withMode(e,c,d[h],j,h):c(d[h],j,h),i===null)continue}else i=d[h];m(i)||(i=[i]);g.push(this.createElement(b,j,i,e))}return g},fragment:function(){var b=function(){var a;a=arguments.length===1&&m(arguments[0])?arguments[0]:q.call(arguments);g(a);return this.modes[this.mode].fragment(a)};b.map=function(a,d){if(!l(d))return f.fragment(a);for(var c=[],b=0,e=a.length,g;b<e;b++)g=d(a[b],b),g!==null&&(c=c.concat(g));return f.fragment(c)};return b}(),
util:{TAG_NAMES:e,extend:k,lookup:function(b){for(var a={},d=0,c=b.length;d<c;d++)a[b[d]]=!0;return a},inheritFrom:function(b,a){function d(){}d.prototype=a.prototype;b.prototype=new d;b.prototype.constructor=b},isArray:m,isFunction:l,isObject:j,isString:function(b){return p.call(b)==="[object String]"},flatten:g}};o?k(module.exports,f):i.DOMBuilder=f})(this);
(function(i){var k=typeof module!=="undefined"&&module.exports,m=k?require("./DOMBuilder"):i.DOMBuilder,l=i.document,j=Object.prototype.hasOwnProperty,i=m.util.addEvent,g=m.util.lookup,h,n,o;if(typeof jQuery!="undefined")h=jQuery.attrFn,k||(n=function(e,f){if(j.call(f,"innerHTML")){var b=f.innerHTML;delete f.innerHTML;return jQuery("<"+e+">",f).html(b).get(0)}else return jQuery("<"+e+">",f).get(0)},i=function(e,f,b){jQuery("#"+e)[f](b)},o=function(e,f){jQuery(e).html(f)});else if(h=g("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" ")),
!k){var p=function(){var e=l.createElement("div");e.style.display="none";e.innerHTML='<span style="color:silver;">s<span>';return/silver/.test(e.getElementsByTagName("span")[0].getAttribute("style"))}(),q=/^(?:href|src|style)$/,r={cellspacing:"cellSpacing","class":"className",colspan:"colSpan","for":"htmlFor",frameborder:"frameBorder",maxlength:"maxLength",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};n=function(e,f){var b=l.createElement(e),a,d;j.call(f,"innerHTML")&&
(o(b,f.innerHTML),delete f.innerHTML);for(a in f)if(d=f[a],a=r[a]||a,h[a])b["on"+a]=d;else{var c=q.test(a);(a in b||b[a]!==void 0)&&!c?b[a]=d:!p&&a=="style"?b.style.cssText=""+d:b.setAttribute(a,""+d)}return b};i=function(e,f,b){l.getElementById(e)["on"+f]=b};o=function(e,f){try{e.innerHTML=f}catch(b){var a=l.createElement("div");for(a.innerHTML=f;e.firstChild;)e.removeChild(e.firstChild);for(;a.firstChild;)e.appendChild(a.firstChild)}}}m.addMode({name:"dom",createElement:function(e,f,b){var a=j.call(f,
"innerHTML"),e=n(e,f);if(!a)for(var a=0,f=b.length,d;a<f;a++)(d=b[a])&&d.nodeType?e.appendChild(d):e.appendChild(l.createTextNode(""+d));return e},fragment:function(e){for(var f=l.createDocumentFragment(),b=0,a=e.length,d;b<a;b++)d=e[b],d.nodeType?f.appendChild(d):f.appendChild(l.createTextNode(""+d));return f},isObject:function(e){return!e.nodeType},api:{EVENT_ATTRS:h,createElement:n,addEvent:i,setInnerHTML:o}})})(this);
(function(i){function k(a){this.value=a}function m(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;").split("'").join("&#39;")}function l(a){if(a instanceof k)return a.value;return m(""+a)}function j(a){this.childNodes=a||[];this._inlineFragments()}function g(a,d,c){j.call(this,c);this.tagName=this.nodeName=a.toLowerCase();this.attributes=d||{};this.xhtml=n.mode=="XHTML"}function h(a){j.call(this,a)}var n=typeof module!=="undefined"&&module.exports?
require("./DOMBuilder"):i.DOMBuilder,o=n.dom,p=Object.prototype.hasOwnProperty,q=Array.prototype.splice,r=n.util.extend,i=n.util.inheritFrom,e=n.util.lookup,f=e(n.util.TAG_NAMES),b=e("area base br col frame hr input img link meta param".split(" "));i(k,String);k.prototype.toString=k.prototype.valueOf=function(){return this.value};i(j,Object);j.prototype._inlineFragments=function(){for(var a=0,d=this.childNodes.length,c;a<d;a++)if(c=this.childNodes[a],c instanceof h)q.apply(this.childNodes,[a,1].concat(c.childNodes)),
c.childNodes=[]};j.prototype.appendChild=function(a){a instanceof h?(this.childNodes=this.childNodes.concat(a.childNodes),a.childNodes=[]):this.childNodes.push(a)};j.prototype.cloneNode=function(a){var d=this._clone();if(a===!0)for(var c=0,b=this.childNodes.length,e;c<b;c++)e=this.childNodes[c],e instanceof g?d.childNodes.push(e.cloneNode(a)):d.childNodes.push(e);return d};j.prototype._clone=function(){return new Node};i(g,j);g.eventTrackerId=1;g.prototype.nodeType=1;g.prototype._clone=function(){var a=
new g(this.tagName,r({},this.attributes));a.xhtml=this.xhtml;return a};g.prototype.toString=function(a){var a=a||!1,d=f[this.tagName]?this.tagName:l(this.tagName),c=["<"+d],e;for(e in this.attributes)if(e!=="innerHTML")if(o&&o.EVENT_ATTRS[e]){if(a===!0&&!this.eventsFound)this.eventsFound=!0}else c.push(" "+l(e.toLowerCase())+'="'+l(this.attributes[e])+'"');if(this.eventsFound&&!p.call(this.attributes,"id"))this.id="__DB"+g.eventTrackerId++ +"__",c.push(' id="'+this.id+'"');c.push(">");if(b[d])return this.xhtml&&
c.splice(c.length-1,1," />"),c.join("");if(p.call(this.attributes,"innerHTML"))c.push(this.attributes.innerHTML);else{e=0;for(var h=this.childNodes.length,i;e<h;e++)i=this.childNodes[e],i instanceof g||i instanceof k?c.push(i.toString(a)):c.push(m(""+i))}c.push("</"+d+">");return c.join("")};g.prototype.addEvents=function(){if(this.eventsFound){var a=p.call(this.attributes,"id")?l(this.attributes.id):this.id,b;for(b in this.attributes)o.EVENT_ATTRS[b]&&o.addEvent(a,b,this.attributes[b]);delete this.eventsFound;
delete this.id}a=0;b=this.childNodes.length;for(var c;a<b;a++)c=this.childNodes[a],c instanceof g&&c.addEvents()};g.prototype.insertWithEvents=function(a){o.setInnerHTML(a,this.toString(!0));this.addEvents()};i(h,j);h.prototype._clone=function(){return new h};h.prototype.nodeType=11;h.prototype.nodeName="#document-fragment";h.prototype.toString=function(a){for(var a=a||!1,b=[],c=0,e=this.childNodes.length,f;c<e;c++)f=this.childNodes[c],f instanceof g||f instanceof k?b.push(f.toString(a)):b.push(m(""+
f));return b.join("")};h.prototype.addEvents=function(){for(var a=0,b=this.childNodes.length,c;a<b;a++)c=this.childNodes[a],c instanceof g&&c.addEvents()};h.prototype.insertWithEvents=function(a){o.setInnerHTML(a,this.toString(!0));this.addEvents()};n.addMode({name:"html",createElement:function(a,b,c){return new g(a,b,c)},fragment:function(a){return new h(a)},isObject:function(a){return!(a instanceof j)&&!(a instanceof k)},api:{conditionalEscape:l,isSafe:function(a){return a instanceof k},markSafe:function(a){return new k(a)},
SafeString:k,HTMLNode:j,HTMLElement:g,HTMLFragment:h}})})(this);
